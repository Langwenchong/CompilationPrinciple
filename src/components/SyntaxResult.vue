<template>
  <div id="SyntaxResult">
    <div id="main">
      <div id="note" class="animate__animated animate__flipInX">
        <div class="title">
          <strong>Tipsï¼š</strong>
        </div>
        <div class="content">
          ä¸‹é¢æ˜¯æ ¹æ®æ‚¨ä¸Šä¼ çš„ç¨‹åºä»£ç åæ™ºèƒ½åˆ†æå‡ºçš„Firsté›†ä¸Followé›†ã€é¢„æµ‹åˆ†æè¡¨ä»¥åŠå½’çº¦åºåˆ—ï¼Œå¦‚æœæ‚¨éœ€è¦ä¿®æ”¹ç¨‹åºä»£ç è¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿”å›ç¼–è¾‘é¡µé¢é‡æ–°ç¼–è¾‘~
          <br />
          <div class="link-card" @click="backup">
            <a href="#">
              <div class="left">
                <img
                  src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png"
                />
              </div>
              <div class="right">
                <p class="text">è¿”å›ç¼–è¾‘é¡µé¢</p>
                <p class="url">
                  å¦‚æœå–œæ¬¢æ­¤ç½‘ç«™ï¼Œä¸å¦¨
                  <kbd>Ctrl</kbd>+ <kbd>D</kbd>æ”¶è—ä¸€ä¸‹ğŸ˜›ï¼
                </p>
              </div>
            </a>
          </div>
        </div>
      </div>
      <div id="Green" class="animate__animated animate__flipInX">
        <div class="title">
          <strong
            >ç»åˆ†ææ–‡æ³•ä¸­äº§ç”Ÿçš„Firsté›†åˆå¦‚ä¸‹ï¼Œä»–é‡‡ç”¨äº†å¦‚ä¸‹çš„ç”Ÿæˆç®—æ³•ï¼š</strong
          >
        </div>
        <div class="content">
          â‘ å¦‚æœXâˆˆVT,åˆ™FIRST(X)={X}<br />
          â‘¡å¦‚æœXâˆˆVN,ä¸”æœ‰äº§ç”Ÿå¼X->a,åˆ™æŠŠaåŠ å…¥åˆ°FIRST(X)ä¸­;è‹¥X->Îµä¹Ÿæ˜¯ä¸€ä¸ªäº§ç”Ÿå¼,åˆ™æŠŠÎµåŠ å…¥åˆ°FIRST(X)ä¸­<br />
          â‘¢å¦‚æœX->Yæ˜¯ä¸€ä¸ªäº§ç”Ÿå¼ä¸”YâˆˆVN,
          åˆ™æŠŠFIRST(Y)\{Îµ}åŠ åˆ°FIRST(X)ä¸­;å¦‚æœX->Y1Y2â€¦Ykæ˜¯ä¸€ä¸ªäº§ç”Ÿå¼,
          Y1,...,Yi-1âˆˆVN,è€Œä¸”å¯¹ä»»ä½•j, jâˆˆ[1, i-1], ÎµâˆˆFIRST (Yj),
          (å³Y1Y2â€¦Yi-1=>*Îµ) , åˆ™æŠŠFIRST(Yi )\{Îµ}åŠ åˆ°FIRST(X)ä¸­; ç‰¹åˆ«æ˜¯,
          è‹¥æ‰€æœ‰çš„FIRST(Yj )å‡å«æœ‰Îµ,j=1,2,â€¦,k, åˆ™æŠŠÎµåŠ åˆ°FIRST(X)ä¸­
        </div>
      </div>
      <div id="table" class="animate__animated animate__fadeIn">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="text-align: center">æ–‡æ³•ç¬¦å·</th>
                <th style="text-align: center">Firsté›†</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="(item, i) in FirstData" :key="i">
                <td style="text-align: center">{{ item.symbol }}</td>
                <td style="text-align: center">
                  <span>{</span>
                  <span v-for="(fir, j) in item.first" :key="j"
                    >{{ fir }},</span
                  >
                  <span>}</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div id="Yellow" class="animate__animated animate__flipInX">
        <div class="title">
          <strong
            >ç»åˆ†ææ–‡æ³•ä¸­äº§ç”Ÿçš„Followé›†åˆå¦‚ä¸‹ï¼Œä»–é‡‡ç”¨äº†å¦‚ä¸‹çš„ç”Ÿæˆç®—æ³•ï¼š</strong
          >
        </div>
        <div class="content">
          â‘ å¯¹äºæ–‡æ³•çš„å¼€å§‹ç¬¦å·S, ç½®#äºFOLLOW(S)ä¸­;<br />
          â‘¡è‹¥A->Î±BÎ²æ˜¯ä¸€ä¸ªäº§ç”Ÿå¼, åˆ™æŠŠFIRST(Î²)\{Îµ}åŠ è‡³FOLLOW(B)ä¸­;<br />
          â‘¢è‹¥A->Î±Bæ˜¯ä¸€ä¸ªäº§ç”Ÿå¼, æˆ–A->Î±BÎ²æ˜¯ä¸€ä¸ªäº§ç”Ÿå¼è€ŒÎ² => Îµ (å³ÎµâˆˆFIRST(Î²) ),
          åˆ™æŠŠFOLLOW(A)åŠ è‡³FOLLOW(B)ä¸­);
        </div>
      </div>
      <div id="table" class="animate__animated animate__fadeIn">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="text-align: center">æ–‡æ³•ç¬¦å·</th>
                <th style="text-align: center">Followé›†</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="(el, k) in FollowData" :key="k">
                <td style="text-align: center">{{ el.symbol }}</td>
                <td style="text-align: center">
                  <span>{</span>
                  <span v-for="(fol, l) in el.follow" :key="l">{{ fol }},</span>
                  <span>}</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div id="error" class="animate__animated animate__flipInX">
        <div class="title">
          <strong
            >æ ¹æ®ä¸Šé¢ç”Ÿæˆçš„Firsté›†åˆFollowé›†ç”Ÿæˆå¦‚ä¸‹LL(1)é¢„æµ‹åˆ†æè¡¨ï¼Œå®ƒé‡‡ç”¨äº†å¦‚ä¸‹çš„ç”Ÿæˆç®—æ³•ï¼š</strong
          >
        </div>
        <div class="content">
          â‘ å¯¹æ–‡æ³•Gçš„æ¯ä¸ªäº§ç”Ÿå¼A->Î±,æ‰§è¡Œç¬¬â‘¡å’Œç¬¬â‘¢æ­¥;<br />
          â‘¡å¯¹æ¯ä¸ªç»ˆç»“ç¬¦aâˆˆFIRST(Î±), æŠŠA->Î±åŠ å…¥M[A, item]ä¸­;<br />
          â‘¢è‹¥Îµâˆˆ FIRST(Î±), åˆ™å¯¹ä»»ä½•bâˆˆFOLLOW(A), æŠŠA->ÎµåŠ å…¥M[A, b]ä¸­;<br />
          â‘£æŠŠæ‰€æœ‰æ— å®šä¹‰çš„M[A, item]æ ‡ä¸Šâ€œå‡ºé”™æ ‡å¿—â€;
        </div>
      </div>
      <div id="table" class="animate__animated animate__fadeIn">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th
                  v-for="(symbol, m) in LLTable[0]"
                  :key="m"
                  style="text-align: center"
                >
                  {{ symbol }}
                </th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="(grammars, n) in LLTable.slice(1)" :key="n">
                <td
                  v-for="(grammar, o) in grammars"
                  :key="o"
                  style="text-align: center"
                >
                  {{ grammar }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div id="Purple" class="animate__animated animate__flipInX">
        <div class="title">
          <strong
            >æ ¹æ®ä¸Šé¢çš„é¢„æµ‹åˆ†æè¡¨å’Œæ–‡æ³•è¯­å¥å¯ä»¥è‡ªåŠ¨ç”Ÿæˆè¦æ¼”ç¤ºçš„å½’çº¦æ­¥éª¤ï¼Œå…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</strong
          >
        </div>
        <div class="content">
          â‘ è‹¥X = a = â€˜#â€™ï¼Œåˆ™å®£å¸ƒåˆ†ææˆåŠŸï¼Œåœæ­¢åˆ†æè¿‡ç¨‹ï¼›<br />
          â‘¡è‹¥X = a â‰ â€˜#â€™ï¼Œåˆ™æŠŠXä»STACKæ ˆé¡¶å¼¹å‡ºï¼Œè®©aæŒ‡å‘ä¸‹ä¸€ä¸ªè¾“å…¥ç¬¦å·ï¼›<br />
          â‘¢è‹¥Xæ˜¯ä¸€ä¸ªéç»ˆç»“ç¬¦ï¼Œåˆ™æŸ¥çœ‹åˆ†æè¡¨Mã€‚
          è‹¥M[X,a]ä¸­å­˜æ”¾ç€å…³äºXçš„ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œé‚£ä¹ˆï¼Œå…ˆæŠŠX
          å¼¹å‡ºSTACKæ ˆé¡¶ï¼Œç„¶åæŠŠäº§ç”Ÿå¼çš„å³éƒ¨ç¬¦å·ä¸²æŒ‰ååº
          ä¸€ä¸€æ¨è¿›STACKæ ˆï¼ˆè‹¥å³éƒ¨ç¬¦å·ä¸ºÎµï¼Œåˆ™æ„å‘³ç€ä¸æ¨
          ä»»ä½•ç¬¦å·è¿›æ ˆ)ã€‚åœ¨æŠŠäº§ç”Ÿå¼çš„å³éƒ¨ç¬¦å·æ¨è¿›æ ˆçš„åŒ
          æ—¶åº”è¯¥åšè¿™ä¸ªäº§ç”Ÿå¼å¯¹åº”çš„è¯­ä¹‰åŠ¨ä½œï¼ˆç›®å‰æš‚ä¸”ä¸
          ç®¡ï¼‰ã€‚è‹¥M[X,a]ä¸­å­˜æ”¾ç€â€œå‡ºé”™æ ‡å¿—â€ï¼Œåˆ™è°ƒç”¨å‡ºé”™ è¯Šæ–­ç¨‹åºERROR
        </div>
      </div>
      <div id="table" class="animate__animated animate__fadeIn">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="text-align: center">æ­¥éª¤</th>
                <th style="text-align: center">ç¬¦å·æ ˆ</th>
                <th style="text-align: center">è¾“å…¥ä¸²</th>
                <th style="text-align: center">é™„æ³¨</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="(act, p) in Token" :key="p">
                <td style="text-align: center">{{ p }}</td>
                <td style="text-align: center">{{ act.stack }}</td>
                <td style="text-align: center">{{ act.sentence }}</td>
                <td style="text-align: center">{{ act.action }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</template>



<script>
var grammarStr = []; //ç›¸å…³æ–‡æ³•
var production = new Map();
var FirstMap = new Map();
var StringFirstMap = new Map();
var FollowMap = new Map();
var VnSet = new Set(); //éç»ˆç»“ç¬¦Vné›†åˆ
var VtSet = new Set(); //ç»ˆç»“ç¬¦Vté›†åˆ
var stack = []; //ç¬¦å·æ ˆ
var inStr = "";
var start = "";
var index = 0;
var action = "";
var table = []; //é¢„æµ‹åˆ†æè¡¨
var token = [];

export default {
  created() {
    grammarStr = this.$route.params.grammarStr;
    start = this.$route.params.start;
    inStr = this.$route.params.inStr;
    // console.log(grammarStr);
    // console.log(start);
    // console.log(inStr);
    this.dividechar();
    // VnSet.forEach((el, item, VnSet) => {
    //   console.log(`VnSetï¼š` + el);
    // });
    // VtSet.forEach((el, item, VtSet) => {
    //   console.log(`VtSetï¼š` + el);
    // });
    this.First();
    VnSet.forEach((el, item, VnSet) => {
      var l = production.get(el);
      for (var s of l) {
        this.getFirstX(s);
      }
    });
    // FirstMap.forEach((value, key, map) => {
    //   for (var v of value) {
    //     console.log(`First:` + key + " " + v);
    //   }
    // });
    this.Follow();
    this.createTable();
    this.processLL1();
  },
  mounted() {
    //è·å–FirstData
    VnSet.forEach((el, item, VnSet) => {
      var set = FirstMap.get(el);
      let obj = {
        symbol: el,
        first: Array.from(set),
      };
      this.FirstData.push(obj);
    });
    //è·å–FollowData
    VnSet.forEach((el, item, VnSet) => {
      var set = FollowMap.get(el);
      console.log(set.size);
      let obj = {
        symbol: el,
        follow: Array.from(set),
      };
      this.FollowData.push(obj);
    });
    //è·å–é¢„æµ‹åˆ†æè¡¨
    this.LLTable = table;
    //èµ‹å€¼æœ€ç»ˆçš„åºåˆ—
    this.Token = token;
  },
  name: "SyntaxResult",
  data() {
    return {
      FirstData: [],
      FollowData: [],
      LLTable: [],
      Token: [],
    };
  },
  methods: {
    backup() {
      this.$router.push({ name: "GrammarEditor" });
      location.reload();
    },
    dividechar() {
      for (var str of grammarStr) {
        // å¾—åˆ°äº§ç”Ÿå¼å³ä¾§çš„ç¬¦å·
        // å¹¶å°† | ä¸¤ä¾§ç¬¦å·åˆ†å¼€
        // console.log(str);
        var strings = str.split("->")[1].split("|");
        // äº§ç”Ÿå¼å·¦ä¾§çš„éç»ˆç»“ç¬¦
        var Vch = str[0];
        // æŸ¥çœ‹æ˜¯å¦å·²å­˜åœ¨éç»ˆç»“ç¬¦Vch
        var list = production.has(Vch) ? production.get(Vch) : [];
        // å°†Vchæ‰€èƒ½æ¨å‡ºçš„ç¬¦å·å­˜åœ¨listç§
        strings.forEach((S, key, strings) => {
          list.push(S);
        });
        // å°†Vchå’Œlistç»„æˆçš„é”®å€¼å¯¹å­˜æ”¾åœ¨productionä¸­
        production.set(str[0], list);
        VnSet.add(Vch);
      }
      // å¾—åˆ°ç»ˆç»“ç¬¦
      VnSet.forEach((ch, i, VnSet) => {
        var p = production;
        for (let j = 0; j < p.get(ch).length; j++) {
          var str = p.get(ch)[j];
          for (let k = 0; k < str.length; k++) {
            var c = str[k];
            if (!VnSet.has(c)) {
              VtSet.add(c);
            }
          }
        }
      });
    },
    First() {
      // éå†æ±‚éç»ˆç»“ç¬¦çš„Firsté›†
      VnSet.forEach((vn, key, VnSet) => {
        this.getFirst(vn);
      });
    },
    getFirst(ch) {
      // é€’å½’ç”ŸæˆFirsté›†
      var ch_production = production.get(ch);
      var set = FirstMap.has(ch) ? FirstMap.get(ch) : new Set();
      // å½“chä¸ºç»ˆç»“ç¬¦æ—¶
      if (VtSet.has(ch)) {
        set.add(ch);
        FirstMap.set(ch, set);
        return;
      }
      // å½“chä¸ºéç»ˆç»“ç¬¦æ—¶
      for (let i = 0; i < ch_production.length; i++) {
        var str = ch_production[i];
        var j = 0;
        while (j < str.length) {
          var tn = str[j];
          this.getFirst(tn);
          var tvSet = FirstMap.get(tn);
          tvSet.forEach((tmp, key, tvSet) => {
            if (tmp != "Îµ") {
              set.add(tmp);
            }
          });
          if (tvSet.has("Îµ")) j++;
          else break;
        }
        if (j === str.length) set.add("Îµ");
      }
      FirstMap.set(ch, set);
    },
    getFirstX(s) {
      var set = StringFirstMap.has(s) ? StringFirstMap.get(s) : new Set();
      var i = 0;
      while (i < s.length) {
        var tn = s[i];
        if (!FirstMap.has(tn)) getFirst(tn);
        var tvSet = FirstMap.get(tn);
        tvSet.forEach((tmp, key, tvSet) => {
          if (tmp != "Îµ") set.add(tmp);
        });
        if (tvSet.has("Îµ")) i++;
        else break;
        if (i === s.length) set.add("Îµ");
      }
      StringFirstMap.set(s, set);
    },
    Follow() {
      //åˆç†çš„åšæ³•æ˜¯æ£€æµ‹éç»ˆç»“ç¬¦çš„followé›†åˆæ˜¯å¦æœ‰å¢åŠ å˜åŒ–
      //ä½†æ˜¯è¿™é‡Œé‡‡ç”¨äº†å¤šæ¬¡å¾ªç¯çš„ç®€å•æ–¹æ³•å®ç°
      for (let i = 0; i < 3; i++) {
        VnSet.forEach((ch, item, VnSet) => {
          this.getFollow(ch);
        });
      }
    },
    getFollow(c) {
      // console.log(c + " " + c.length);
      var list = production.get(c);
      var setA = FollowMap.has(c) ? FollowMap.get(c) : new Set();
      //å¦‚æœæ˜¯å¼€å§‹ç¬¦å·ï¼Œé‚£ä¹ˆè¦åœ¨followé›†ä¸­æ·»åŠ #ç¬¦å·
      if (c === start) {
        // console.log(c);
        setA.add("#");
      }
      //æŸ¥æ‰¾è¾“å…¥çš„äº§ç”Ÿå¼ï¼Œç¡®å®šcåé¢çš„ç»ˆç»“ç¬¦
      VnSet.forEach((ch, item, VnSet) => {
        var l = production.get(ch);
        for (var s of l) {
          for (let i = 0; i < s.length; i++) {
            //å…ˆæ‰¾åˆ°è¿™ä¸ªéç»ˆç»“ç¬¦ï¼Œç„¶åç¡®ä¿ä»–åé¢çš„æ˜¯ç»ˆç»“ç¬¦ï¼Œé‚£ä¹ˆå‡å¦‚åˆ°ä»–çš„followé›†åˆ
            if (s[i] === c && i + 1 < s.length && VtSet.has(s[i + 1])) {
              setA.add(s[i + 1]);
            }
          }
        }
      });
      FollowMap.set(c, setA);
      // console.log(FollowMap.get("E"));
      //ç„¶åå¤„ç†cçš„æ¯ä¸€ä¸ªäº§ç”Ÿå¼
      for (var s of list) {
        var i = s.length - 1;
        while (i >= 0) {
          var tn = s[i];
          //åªéœ€è¦å¤„ç†éç»ˆç»“ç¬¦
          if (VnSet.has(tn)) {
            //A->aBÎ²å½¢å¼å¤„ç†
            //è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸‰ç§ç®—æ³•çš„æ­¥éª¤éƒ½è¿›è¡Œä¸€é
            //å¦‚æœÎ²ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆfollowAå‡å¦‚åˆ°followBä¸­
            //å¦‚æœÎ²å­˜åœ¨ï¼Œåˆ™æŠŠÎ²çš„firsté›†åˆ/Îµå‡å¦‚åˆ°followB
            //å¦‚æœÎ²å­˜åœ¨ï¼Œå¹¶ä¸”first(Î²)å­˜åœ¨ä¸”åŒ…å«Îµ é‚£ä¹ˆfollowAå‡å¦‚åˆ°followB

            //é¦–å…ˆæˆ‘ä»¬å†™Î²å­˜åœ¨çš„æƒ…å†µ
            if (s.length - i - 1 > 0) {
              var right = s.substring(i + 1);
              //é‚£ä¹ˆæŠŠrightçš„firsté›†/ÎµåŠ å…¥åˆ°followB
              var setF = null;
              if (right.length == 1) {
                //åˆšå¥½ä»–åé¢å°±æ˜¯ä¸€ä¸ªå­—ç¬¦
                if (!FirstMap.has(right[0])) {
                  // console.log(right);
                  this.getFirst(right[0]);
                }
                setF = FirstMap.get(right[0]);
              } else {
                //åé¢æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆéœ€è¦æŸ¥æ‰¾è¿™ä¸ªå­—ç¬¦ä¸²çš„firsté›†åˆ
                if (!StringFirstMap.has(right)) {
                  // console.log(right);
                  this.getFirstX(right);
                }
                setF = StringFirstMap.get(right);
              }
              var setX = FollowMap.has(tn) ? FollowMap.get(tn) : new Set();
              setF.forEach((el, item, setF) => {
                if (el != "Îµ") {
                  setX.add(el);
                }
              });
              FollowMap.set(tn, setX);

              //å¦‚æœfirst(Î²)åŒ…å«ç©ºä¸²Îµï¼Œé‚£ä¹ˆæŠŠfollowAåŠ å…¥åˆ°followBä¸­
              if (setF.has("Îµ")) {
                //å½“å‰ç¬¦å·ä¸æ˜¯cæ‰èƒ½æ“ä½œ
                if (tn != c) {
                  var setB = FollowMap.has(tn) ? FollowMap.get(tn) : new Set();
                  setA.forEach((el, item, setA) => {
                    setB.add(el);
                  });
                  FollowMap.set(tn, setB);
                }
              }
            } else {
              //Î²ä¸å­˜åœ¨
              //å¦‚æœAå’ŒBç›¸åŒåˆ™æ— éœ€æ“ä½œ
              if (tn != c) {
                setB = FollowMap.has(tn) ? FollowMap.get(tn) : new Set();
                setA.forEach((el, item, setA) => {
                  setB.add(el);
                });
                FollowMap.set(tn, setB);
              }
            }
            i--;
          } else {
            //å¦‚æœæ˜¯ç»ˆç»“ç¬¦ï¼Œé‚£ä¹ˆå¾€å‰çœ‹ï¼Œå¦‚ A->aaaBCDaaaa  æ­¤æ—¶Î²ä¸º CDaaaa
            i--;
          }
        }
      }
    },
    createTable() {
      var VtArray = Array.from(VtSet);
      var VnArray = Array.from(VnSet);
      //å…ˆæŠŠåˆ†æè¡¨åˆå§‹åŒ–
      var tmp = [];
      tmp.push("Vn/Vt");
      for (let i = 0; i < VtArray.length; i++) {
        tmp.push(VtArray[i][0] === "Îµ" ? "#" : VtArray[i]);
      }
      table.push(tmp);
      for (let i = 0; i < VnArray.length; i++) {
        var tmp = [];
        tmp.push(VnArray[i]);
        for (let j = 0; j < VtArray.length; j++) {
          tmp.push("error");
        }
        table.push(tmp);
      }
      //æ’å…¥ç”Ÿæˆå¼
      VnSet.forEach((A, item, VnSet) => {
        var l = production.get(A);
        for (var s of l) {
          var set = StringFirstMap.get(s);
          for (var a of set) {
            this.insert(A, a, s);
          }
          //æœ‰Îµåœ¨firsté›†æ—¶
          if (set.has("Îµ")) {
            var setFollow = FollowMap.get(A);
            if (setFollow.has("#")) {
              this.insert(A, "#", s);
            }
            for (var b of setFollow) {
              this.insert(A, b, s);
            }
          }
        }
      });
    },
    insert(X, a, s) {
      if (a === "Îµ") a = "#";
      for (let i = 0; i < VnSet.size + 1; i++) {
        // console.log(table[i][0] + " " + X);
        if (table[i][0] === X) {
          for (let j = 0; j < VtSet.size + 1; j++) {
            if (table[0][j] === a) {
              table[i][j] = s;
              return;
            }
          }
        }
      }
    },
    processLL1() {
      stack.push("#");
      stack.push(start);
      this.displayLL();
      var X = stack[stack.length - 1];
      while (X != "#") {
        var a = inStr[index];
        if (X === a) {
          action = `å½’çº¦${X}`;
          stack.pop();
          index++;
        } else if (this.find(X, a) === "error") {
          var flag = false;
          if (FirstMap.get(X).has("Îµ")) {
            action = `${X}->Îµ`;
            stack.pop();
            flag = true;
          }
          if (!flag) {
            action = "error";
            this.displayLL();
            return;
          }
        } else if (this.find(X, a) === "Îµ") {
          stack.pop();
          action = `${X}->Îµ`;
        } else {
          // console.log(X + " " + a);
          var str = this.find(X, a);
          if (str != "") {
            action = `${X}->${str}`;
            stack.pop();
            var len = str.length;
            var pushStr = ``;
            for (let i = len - 1; i >= 0; i--) {
              stack.push(str[i]);
              pushStr += str[i];
            }
          } else {
            this.$notify.error({
              title: "é”™è¯¯",
              message: `åœ¨${inStr[index]}çš„${index}å¤„å‡ºç°å½’çº¦é”™è¯¯`,
            });
            return;
          }
        }
        X = stack[stack.length - 1];
        this.displayLL();
      }
    },
    displayLL() {
      var obj = {};
      var s = [];
      Object.assign(s, stack);
      obj.stack = s;
      obj.sentence = inStr.substring(index);
      obj.action = action;
      token.push(obj);
    },
    find(X, a) {
      for (let i = 0; i < VnSet.size + 1; i++) {
        if (table[i][0] === X) {
          for (let j = 0; j < VtSet.size + 1; j++) {
            if (table[0][j] === a) {
              // console.log(table[i][j]);
              return table[i][j];
            }
          }
        }
      }
    },
  },
};
</script>


<style scoped>
#SyntaxResult {
  color: #d1d2d2;
  /* background: 0% 0% / auto repeat rgb(171, 184, 195)
    url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACFJREFUeNpiZGBg4GegAsBlCD8TqSYNQg2Mo6FEBAAIMACdPABtrSW/IQAAAABJRU5ErkJggg=="); */
  background: #313438;
  min-height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
}
#SyntaxResult #main {
  width: 80%;
  min-height: 200px;
  /* background: yellow; */
  margin: 40px auto;
}
#SyntaxResult #main #Green {
  box-sizing: border-box;
  width: 100%;
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
  border-radius: 6px;
  background: #455955;
  border: 1px solid #3ead51;
  min-height: 100px;
}
#SyntaxResult #main #Yellow {
  box-sizing: border-box;
  width: 100%;
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
  border-radius: 6px;
  background: #585851;
  border: 1px solid #daa633;
  min-height: 100px;
}
#SyntaxResult #main #Purple {
  box-sizing: border-box;
  width: 100%;
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
  border-radius: 6px;
  background: #4e495f;
  border: 1px solid #8a2e9e;
  min-height: 100px;
}
#SyntaxResult #main #note {
  box-sizing: border-box;
  width: 100%;
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
  border-radius: 6px;
  background: #425465;
  border: 1px solid #2887d3;
  min-height: 100px;
}
#SyntaxResult #main #note .link-card {
  margin-right: 1em;
  background: #3a3a3a;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  text-align: center;
  /* min-width: 361px; */
  max-width: 100%;
  box-shadow: 0 1px 2px 0px rgb(0 0 0 / 10%);
  color: #bbb;
  border-radius: 8px;
  margin-top: 10px;
  transition: 0.3s;
}
#SyntaxResult #main #note .link-card:hover {
  box-shadow: 0 4px 8px 0px rgb(0 0 0 / 10%), 0 2px 4px 0px rgb(0 0 0 / 10%),
    0 4px 8px 0px rgb(0 0 0 / 10%), 0 8px 16px 0px rgb(0 0 0 / 10%);
}
kbd {
  color: #444 !important;
  padding: 3px 5px !important;
  border-radius: 0.25em !important;
  box-shadow: inset 0 -2px 0 #d3d3d4, 0 1px 1px #000 !important;
  font: 11px SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace !important;
  border-radius: 4px !important;
  border: 1px solid #d2d2d2 !important;
  border-bottom-width: 2px !important;
  background: #fafafa !important;
  padding-left: 4px !important;
  padding-right: 4px !important;
  letter-spacing: initial;
  margin-right: 5px;
}
#SyntaxResult #main #note .link-card a {
  align-items: center;
  text-decoration: none;
  color: #bbb;
  display: flex;
  width: 100%;
  justify-content: space-between;
}
#SyntaxResult #main #note .link-card a .left {
  width: 54px;
  height: 54px;
  margin: 12px;
  overflow: hidden;
  flex-shrink: 0;
  position: relative;
}
#SyntaxResult #main #note .link-card a .right {
  overflow: hidden;
  margin-right: 16px;
  margin-left: 10px;
}
#SyntaxResult #main #note .link-card a .right p {
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 900;
  font-family: "STFangsong";
  text-align: left;
}
#SyntaxResult #main #note .link-card a .left img {
  display: block;
  position: absolute;
  /* border-radius: 8px/4; */
  height: 100%;
  width: 100%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
#SyntaxResult #main .title {
  margin-top: 1rem;
  font-size: 1.2rem;
  line-height: 1.2;
}
#SyntaxResult #main .content {
  font-size: 1.015rem;
  line-height: 1.5;
  margin-top: 0.5rem;
  margin-bottom: 1rem;
  letter-spacing: 0.25rem;
}
#SyntaxResult #main #table {
  margin-top: 1rem;
  width: 100%;
}
#SyntaxResult #main #table .table-container {
  border-radius: 6px;
  overflow: hidden;
  width: 100%;
}
#SyntaxResult #main #table .table-container table:not([class]) {
  width: 100%;
  border-collapse: collapse;
  overflow: auto;
  /* display: inline-block; */
  max-width: 100%;
  vertical-align: text-top;
}
#SyntaxResult #main #table .table-container table:not([class]) th {
  background-color: #393e44;
  filter: brightness(80%);
}
#SyntaxResult #main #table .table-container table:not([class]) td,
#SyntaxResult #main #table .table-container table:not([class]) th {
  padding: 8px 16px;
  border: 2px solid #464d56;
  line-height: 1.5;
  font-size: 90%;
}
#SyntaxResult #main #table .table-container table:not([class]) tr {
  word-break: keep-all;
  background-color: #393e44;
  transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
}
#SyntaxResult #main #table .table-container table:not([class]) tr:hover {
  opacity: 0.9;
  cursor: url("//cdn.jsdelivr.net/gh/pdone/static/img/cursor/link.cur"), pointer !important;
}
#SyntaxResult #main #table .table-container td,
#SyntaxResult #main #table .table-container th {
  padding: 0;
}
#SyntaxResult #main #error {
  box-sizing: border-box;
  width: 100%;
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
  border-radius: 6px;
  background: #574c52;
  border: 1px solid #d1453c;
  min-height: 100px;
}
</style>